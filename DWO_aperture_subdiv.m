%% Create a square aperture and prop distance that is in the mid-field (Fresnel) regime

xg = linspace(-5,5,1001);
[X,Y] = meshgrid(xg,xg);

% Compute diffraction pattern

%%
%
% 
%
% Subdivide the aperture and compute angular spectrum of each
% Loop over subapertures
%
% For each subaperture
% Compute angular spectrum
% Sample angular spectrum at tilted plane
% Add to accumulated result

